<div class="statuses-list">
  <div class="mat-display-2">Statuses List</div>

  <button class="statuses-list__add-button"
          mat-fab
          color="accent"
          matTooltip="Add Process"
          (click)="onAddStatusClicked()">
    <mat-icon>add</mat-icon>
  </button>

  <div class="statuses-list__container"
       [class.statuses-list__container--mobile]="isHandset$ | async">
    <div class="statuses-list__container__list">
      <mat-select placeholder="Select process"
                  (selectionChange)="onProcessSelectionChange($event)">
        <mat-option *ngFor="let process of processes$ | async" [value]="process.$key">
          {{process.name}}
        </mat-option>
      </mat-select>
      <mat-card *ngIf="(statuses$ | async)?.length === 0">
        <mat-card-header>
          <mat-card-title>There is no statuses.</mat-card-title>
        </mat-card-header>
        <p>Please select process to see linked statuses.</p>
        <p>Please click add button to add new one.</p>
      </mat-card>
      <mat-card *ngFor="let status of statuses$ | async">
        <mat-card-header>
          <mat-card-title>{{status.name}}</mat-card-title>
          <mat-card-subtitle>Description: {{status.description}}</mat-card-subtitle>
          <mat-card-subtitle>Process: {{status.processName}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions>
          <button mat-button (click)="onEditClicked(status)">Edit</button>
          <button mat-button (click)="onRemoveButtonClicked(status)">Remove</button>
        </mat-card-actions>
      </mat-card>
    </div>
    <div class="statuses-list__container__edit-form">
      <app-status-edit-form *ngIf="!!statusToEdit"
                            [model]="statusToEdit"
                            [processes]="processes$ | async"
                            (submitFormEvent)="onFormSubmitted($event)"
                            (closeFormEvent)="onFormClosed()">
      </app-status-edit-form>
    </div>
  </div>
</div>
